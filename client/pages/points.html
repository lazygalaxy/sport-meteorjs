<template name="points">
    <div class="container">
        {{> userSelection }} {{> competitionSelection }} {{#if getUserPoints}}
        <table class="table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Match/Question</th>
                    <th>Result</th>
                    <th>Prediction (Date)</th>
                    <th>Points</th>
                    <th>Rules</th>
                </tr>
            </thead>
            <tbody>
                {{#each getUserPoints}} {{>userPoints}} {{/each}}
            </tbody>
        </table>
        <div class="modal fade" id="matchRules" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Match Point Rules (3, 2 or 1 Points)</h4>
                    </div>
                    <div class="modal-body">
                        Points are awarded in the following way for a match prediction:
                        <p>
                            <ul>
                                <li>3 points awarded if the exact score is predicted correctly</li>
                                <li>2 points awarded if the correct winner and goal difference is predicted correctly</li>
                                <li>1 point awarded if only the winner of the match is predicted correctly</li>
                            </ul>
                        </p>
                        <p>
                            Here is a list of possible points awarded, given the outcome of a game being 2-1:
                            <ul>
                                <li>3 points awarded if the prediction was 2-1</li>
                                <li>2 points awarded if the prediction was 1-0, 3-2 or 4-3</li>
                                <li>1 point awarded if the prediction was 2-0, 3-1 or 4-2</li>
                                <li>0 points awarded if the prediction was 0-1, 0-2 or 1-2</li>
                            </ul>
                        </p>
                        <p>
                            These points are applied against the 90 minute result of a match. Should the game extend to extra time, the scoring system is then applied against the 120 minute result. A penalty shoot-out does not affect the scoring in any way, since penalties scored during the shoot-out are not considered.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        {{else}} {{#with getSelectedCompetition}}
        <h2>{{label}} starts on the {{prettyDate startDate}}.</h2>
        <p>Please come back when the competition starts to view user predictions and points.</p>
        {{/with}} {{/if}}
    </div>
</template>

<template name="userPoints">
    <tr>
        <td>{{prettyDate endDate}}</td>
        <td>{{matchOrQuestion}}</td>
        <td>{{result}}</td>
        <td>{{prediction}}</td>
        <td>{{points}}</td>

        {{#if match}}
        <td>
            <button class="btn btn-warning info-button" data-target="#matchRules" data-toggle="modal"><i class="fa fa-info-circle"></i></button>
        </td>
        {{/if}} {{#if question}}
        <td>
            <button class="btn btn-warning info-button" data-target="#{{question._id}}" data-toggle="modal"><i class="fa fa-info-circle"></i></button>
        </td>
        <div class="modal fade" id="{{question._id}}" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Question Point Rules ({{question.points}} points)</h4>
                    </div>
                    <div class="modal-body">
                        {{question.details}}
                    </div>
                </div>
            </div>
        </div>
        {{/if}}
    </tr>
</template>
